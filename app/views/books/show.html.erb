<%- model_class = Book -%>
<div class="page-header">
  <h3><%=t '.title', :default => @book.title.titleize %></h3>
</div>
<div class="row-fluid">
  <div class="span4">
    <dl class="dl-horizontal">
      <dt><strong><%= model_class.human_attribute_name(:title) %>:</strong></dt>
      <dd><%= @book.title %></dd>
      <dt><strong><%= model_class.human_attribute_name(:author) %>:</strong></dt>
      <dd><%= @book.author %></dd>
      <dt><strong><%= model_class.human_attribute_name(:isbn) %>:</strong></dt>
      <dd><%= @book.isbn %></dd>
      <dt><strong><%= model_class.human_attribute_name(:avg_rating) %>:</strong></dt>
      <dd><%= @book.avg_rating %></dd>
    </dl>
  </div>
  <div class="span6">
    <dl class="dl-horizontal">
      <dd><%= image_tag(@book.image_url, class: "img") if @book.image? %></dd>
    </dl>
  </div>
</div>
<div class="row-fluid">
  <%= link_to t('.back', :default => t("helpers.links.back")),
            books_path, :class => 'btn btn-mini'  %>
  <% if ( ( is_admin? || is_owner?(@book)) ) %>
    <%= link_to t('.edit', :default => t("helpers.links.edit")),
                edit_book_path(@book), :class => 'btn btn-mini' %>
    <% if ( !@book.has_reviews? ) %>
      <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                  book_path(@book),
                  :method => 'delete',
                  :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                  :class => 'btn btn-mini btn-danger' %>
    <% end %>
    <% if ( user_signed_in? && @book.is_active? ) %>
      <%= link_to 'Add Review', new_book_review_path(@book.id), :class => 'btn btn-mini' %>
    <% end %>
  <% end %>
  <%= render :partial => "reviews/index", locals: {:book_id => @book.id}  %>
</div>

